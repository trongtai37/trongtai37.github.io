{"componentChunkName":"component---src-templates-post-js","path":"/using-context-api-in-react/","webpackCompilationHash":"69db345d69029bf31988","result":{"data":{"markdownRemark":{"html":"<p>React Context API is a way to essentially create global variables that can be passed around in a React app. This is the alternative to \"prop drilling\", or passing props from grandparent to parent to child, and so on. Context is often touted as a simpler, lighter solution to using Redux for state management. I haven't used Redux myself yet, but every time I use React's Context API, I have to look it up because it doesn't seem obvious to me.</p>\n<p>I'm going to leave some brief, concise steps to getting started with Context here.</p>\n<h2 id=\"prerequisite\"><a href=\"#prerequisite\" aria-label=\"prerequisite permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisite</h2>\n<ul>\n<li>Read <a href=\"https://www.taniarascia.com/getting-started-with-react/\">Getting Started with React</a> or <a href=\"https://www.taniarascia.com/crud-app-in-react-with-hooks/\">Build a React App with Hooks</a> if you don't know React or React Hooks yet.</li>\n</ul>\n<h2 id=\"create-context\"><a href=\"#create-context\" aria-label=\"create context permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create Context</h2>\n<p>Imagine I have some information I want to be available anywhere or everywhere throughout a React app. A theme might be implemented using Context - for example, on this site I have Context serving three themes: dark mode, light mode, and MS-DOS mode (on the <a href=\"/404\">404 page</a>).In this simple example, I'll use a logged in user.</p>\n<p>I'll create Context, and call it <code class=\"language-text\">UserContext</code>. This will also give me <code class=\"language-text\">UserContext.Provider</code> and <code class=\"language-text\">UserContext.Consumer</code>. What these two components do is straightforward:</p>\n<ul>\n<li><strong>Provider</strong> - The component that provides the value</li>\n<li><strong>Consumer</strong> - A component that is consuming the value</li>\n</ul>\n<p>So I'll create it with <code class=\"language-text\">React.createContext()</code> in a new file called <code class=\"language-text\">UserContext.js</code>.</p>\n<div class=\"filename\">src/UserContext.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> UserContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> UserProvider <span class=\"token operator\">=</span> UserContext<span class=\"token punctuation\">.</span>Provider\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> UserConsumer <span class=\"token operator\">=</span> UserContext<span class=\"token punctuation\">.</span>Consumer\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> UserContext</code></pre></div>\n<p>I'm passing in an empty object value here to represent that I might be filling in this data later with an API call. You can pre-populate this with whatever data you want, in case you're not retrieving the data through an API.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"providing-context\"><a href=\"#providing-context\" aria-label=\"providing context permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Providing Context</h2>\n<p>The provider always needs to exist as a wrapper around the parent element, no matter how you choose to consume the values. I'll wrap the entire <code class=\"language-text\">App</code> component in the <code class=\"language-text\">Provider</code>. I'm just creating some value (<code class=\"language-text\">user</code>) and passing it down as the <code class=\"language-text\">Provider</code> value prop.</p>\n<div class=\"filename\">src/App.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> HomePage <span class=\"token keyword\">from</span> <span class=\"token string\">'./HomePage'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./UserContext'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Tania'</span><span class=\"token punctuation\">,</span> loggedIn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserProvider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HomePage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">UserProvider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now any child, grandchild, great-grandchild, and so on will have access to <code class=\"language-text\">user</code> as a prop. Unfortunately, retrieving that value is slightly more involved than simply getting it like you might with <code class=\"language-text\">this.props</code> or <code class=\"language-text\">this.state</code>.</p>\n<h2 id=\"consuming-context\"><a href=\"#consuming-context\" aria-label=\"consuming context permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Consuming Context</h2>\n<p>The way you provide Context is the same for class and functional components, but consuming it is a little different for both.</p>\n<h3 id=\"class-component\"><a href=\"#class-component\" aria-label=\"class component permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Class component</h3>\n<p>The traditional way to retrieve Context values was by wrapping the child component in the <code class=\"language-text\">Consumer</code>. From there, you would be able to access the value prop as <code class=\"language-text\">props</code>.</p>\n<div class=\"filename\">src/HomePage.js (class example)</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserConsumer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./UserContext'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HomePage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserConsumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">UserConsumer</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>But what about lifecycle methods? What if I need the value from Context outside of <code class=\"language-text\">render</code>? The wrapper method was limited. Instead, we can do this in a class with <code class=\"language-text\">contextType</code>, which is a static variable on the class.</p>\n<div class=\"filename\">src/HomePage.js (class example)</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> UserContext <span class=\"token keyword\">from</span> <span class=\"token string\">'./UserContext'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HomePage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> contextType <span class=\"token operator\">=</span> UserContext\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token comment\">// { name: 'Tania', loggedIn: true }</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"functional-component-and-hooks\"><a href=\"#functional-component-and-hooks\" aria-label=\"functional component and hooks permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Functional component and Hooks</h3>\n<p>For functional components, you'll use <code class=\"language-text\">useContext</code>, such as in the example below. This is the equivalent of <code class=\"language-text\">static contextType</code>.</p>\n<div class=\"filename\">src/HomePage.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> UserContext <span class=\"token keyword\">from</span> <span class=\"token string\">'./UserContext'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HomePage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>UserContext<span class=\"token punctuation\">)</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token comment\">// { name: 'Tania', loggedIn: true }</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>So there you have it.</p>\n<ul>\n<li>Use <code class=\"language-text\">const xContext = React.createContext()</code> to create context.</li>\n<li>Pull <code class=\"language-text\">xContext.Provider</code> and <code class=\"language-text\">xContext.Consumer</code> out of <code class=\"language-text\">xContext</code></li>\n<li>Wrap <code class=\"language-text\">Provider</code> around your parent component.</li>\n<li>A class can consume with <code class=\"language-text\">static contextType = xContext</code></li>\n<li>A functional component can consume with <code class=\"language-text\">const x = useContext(xContext)</code></li>\n</ul>\n<p>Hope this helps! I know I'll be referring to this page again in the future.</p>","timeToRead":4,"excerpt":"React Context API is a way to essentially create global variables that can be passed around in a React app. This is the alternative to \"propâ€¦","frontmatter":{"title":"Using Context API in React (Hooks and Classes)","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACP0lEQVQ4y4WVTYiNYRTH37kvJVIms5QMWSilZmHBaBIbmSLdMBa6txAzZjFRE5kFIzLNjCJFvj+LJl+RhYTCwsJCSnOTMk2xMsZC073q9TvX/7mdee8dnvr1nPf5OM95zjnPeaNILTdcrPRQ58ZjNxdHroV1Np8vlKKqFjZKXgAzTM6z0StDXlRLaZUyZ0k/PIKH0OnWbIQHcBduwayayjSYUb8KhiTPhYswAPt0wBLN9UF72i1RrlAM1sWazEP336tOhMNewa+UARvgmFdYVuquOU39ejjiNu6CM3AABt14G+yXPF2+nnxdyWvhrRRcgh/y53UYl/+64Rl0pV3mfdcIV+AOfJZl72Fd68fE5mcq8gXYAR8UIFvf7CNuwlJ4DVv03SGrevR9Xt+mdKvkPs2tgJewyTv4JrT4PIMJAmYK9nSMJ0n7WJJYqmj+G2Td+jnwNPsuqQz0wHG3YCX8huVmwc5RFH4vK+yE2fAT9rr12+FqxcLdn8o+Ogv3lIcXzDK4pg2LTbHkU3LJDbsVnJMvG2o9txYX2dMwArdhM2yDE4r0SfgKj73vfFB8HlqALsNCi56iOWRJDGPQqrleO8Qldl26ysTOH4fCqflCsV45eB+WOWuycDS1N2wq+Xy0F3DYbWyAN/AFmty4uaE3KOTgquIQytA8eAFrLJJStppnNZ/+ua5u0X9ia8LjyA2X/ltxzI8HreK462cUfXtRbcGQqcrX5EilDvLvfYqC/M8Cm1Hk4tTvIHLjGf/bCO0PIFWRegXnK8AAAAAASUVORK5CYII=","width":150,"height":150,"src":"/static/d695fe69198cc4558284e9aec1a4892c/4148e/react.png","srcSet":"/static/d695fe69198cc4558284e9aec1a4892c/4148e/react.png 1x"}}},"slug":"using-context-api-in-react","date":"2019-04-25T00:00:00.000Z","categories":["Code"],"tags":["javascript","react","context"],"template":"post"},"fields":{"slug":"/using-context-api-in-react/","date":"2019-04-25T00:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/using-context-api-in-react/"}}}