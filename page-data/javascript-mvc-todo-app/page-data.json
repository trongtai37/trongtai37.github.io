{"componentChunkName":"component---src-templates-post-js","path":"/javascript-mvc-todo-app/","webpackCompilationHash":"65c611f74b1531f04772","result":{"data":{"markdownRemark":{"html":"<p>I wanted to write a simple application in plain JavaScript using the <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\">model-view-controller</a> architectural pattern. So I did, and here it is. Hopefully it helps you understand MVC, as it's a difficult concept to wrap your head around when you're first starting out.</p>\n<p>I made <a href=\"https://taniarascia.github.io/mvc\">this todo app</a>, which is a simple little browser app that allows you to CRUD (create, read, update, and delete) todos. It just consists of an <code class=\"language-text\">index.html</code>, <code class=\"language-text\">style.css</code>, and <code class=\"language-text\">script.js</code>, so nice and simple and dependency/framework-free for learning purposes.</p>\n<h4 id=\"prerequisites\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h4>\n<ul>\n<li>Basic JavaScript and HTML</li>\n<li>Familiarity with <a href=\"https://www.taniarascia.com/es6-syntax-and-feature-overview/\">the latest JavaScript syntax</a></li>\n</ul>\n<h4 id=\"goals\"><a href=\"#goals\" aria-label=\"goals permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goals</h4>\n<p>Create a todo app in the browser with plain JavaScript, and get familiar with the concepts of MVC (and OOP - object-oriented programming).</p>\n<ul>\n<li><a href=\"https://taniarascia.github.io/mvc\">View demo</a></li>\n<li><a href=\"https://github.com/taniarascia/mvc\">View source</a></li>\n</ul>\n<blockquote>\n<p><strong>Note:</strong> Since this app uses the latest JavaScript features (ES2017), it won't work as-is on some browsers like Safari without using Babel to compile to backwards-compatible JavaScript syntax.</p>\n</blockquote>\n<h2 id=\"what-is-model-view-controller\"><a href=\"#what-is-model-view-controller\" aria-label=\"what is model view controller permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Model View Controller?</h2>\n<p>MVC is one possible pattern for organizing your code. It's a popular one.</p>\n<ul>\n<li><strong>Model</strong> - Manages the data of an application</li>\n<li><strong>View</strong> - A visual representation of the model</li>\n<li><strong>Controller</strong> - Links the user and the system</li>\n</ul>\n<p>The <strong>model</strong> is the data. In this todo application, that'll be the actual todos, and the methods that will add, edit, or delete them.</p>\n<p>The <strong>view</strong> is how the data is displayed. In this todo application, that will be the rendered HTML in the DOM and CSS.</p>\n<p>The <strong>controller</strong> connects the model and the view. It takes user input, such as clicking or typing, and handles callbacks for user interactions.</p>\n<p>The model never touches the view. The view never touches the model. The controller connects them.</p>\n<blockquote>\n<p>I'd like to mention that doing MVC for a simple todo app is actually a ton of boilerplate. It would really be overcomplicating things if this was the app you wanted to create and you made this whole system. The point is to try to understand it on a small level so you can understand why a scaled system might use it.</p>\n</blockquote>\n<h2 id=\"initial-setup\"><a href=\"#initial-setup\" aria-label=\"initial setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initial Setup</h2>\n<p>This is going to be a fully JavaScript app, which means everything will be handled through JavaScript, and the HTML will only consist of a single root element in the body.</p>\n<div class=\"filename\">index.html</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>X-UA-Compatible<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ie=edge<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Todo App<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>script.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>I wrote a small bit of CSS just to make it look acceptable, which you can find <a href=\"https://github.com/taniarascia/mvc/blob/master/style.css\">here</a> and save to <code class=\"language-text\">style.css</code>. I'm not going to write any more about the CSS, because it's not the focus of this article.</p>\n<p>Okay, so now that we have the HTML and CSS, so it's time to actually start writing the app.</p>\n<h2 id=\"getting-started\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting Started</h2>\n<p>We're going to make this really nice and simple to understand what class pertains to what part of MVC. I'll make a <code class=\"language-text\">Model</code> class, <code class=\"language-text\">View</code> class, and <code class=\"language-text\">Controller</code> class, which takes in the model and view. The app will be an instance of the controller.</p>\n<blockquote>\n<p>If you're not familiar with how classes work, read <a href=\"/understanding-classes-in-javascript/\">Understanding Classes in JavaScript</a>.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Controller</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">model<span class=\"token punctuation\">,</span> view</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model <span class=\"token operator\">=</span> model\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view <span class=\"token operator\">=</span> view\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Controller</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Model</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Very nice and abstract.</p>\n<h2 id=\"model\"><a href=\"#model\" aria-label=\"model permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Model</h2>\n<p>Let's focus on the model first, as it's the simplest of the three parts. It doesn't involve any events or DOM manipulation. It's just storing and modifying data.</p>\n<div class=\"filename\">Model</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// The state of the model, an array of todo objects, prepopulated with some data</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">'Run a marathon'</span><span class=\"token punctuation\">,</span> complete<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> <span class=\"token string\">'Plant a garden'</span><span class=\"token punctuation\">,</span> complete<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">addTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todoText</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> todo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      text<span class=\"token punctuation\">:</span> todoText<span class=\"token punctuation\">,</span>\n      complete<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Map through all todos, and replace the text of the todo with the specified id</span>\n  <span class=\"token function\">editTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> updatedText</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span>\n      todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> updatedText<span class=\"token punctuation\">,</span> complete<span class=\"token punctuation\">:</span> todo<span class=\"token punctuation\">.</span>complete <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">:</span> todo\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Filter a todo out of the array by id</span>\n  <span class=\"token function\">deleteTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Flip the complete boolean on the specified todo</span>\n  <span class=\"token function\">toggleTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span>\n      todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> todo<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">,</span> complete<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>todo<span class=\"token punctuation\">.</span>complete <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">:</span> todo\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We have an <code class=\"language-text\">addTodo</code>, <code class=\"language-text\">editTodo</code>, <code class=\"language-text\">deleteTodo</code>, and <code class=\"language-text\">toggleTodo</code>. These should all be very self explanatory - add appends a new todo to the array, edit finds the id of the todo to edit and replaces it, delete filters a todo out of the array, and toggle switches the <code class=\"language-text\">complete</code> boolean property.</p>\n<p>Since we're doing this all in the browser, and app is accessible from the window (global), you can test these out easily, typing something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">addTodo</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Take a nap'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>will add a todo to the list, and you can log the contents of <code class=\"language-text\">app.model.todos</code>.</p>\n<p>That's good enough for the model right now. In the end, we'll store the todos in <a href=\"/how-to-use-local-storage-with-javascript/\">local storage</a> to make it semi-permanent, but for now the todos will just refresh any time you refresh the page.</p>\n<p>As we can see, the model only deals with the actual data, and modifying that data. It doesn't understand or have any knowledge the <strong>input</strong> - what's modifying it, or the <strong>output</strong> - what will end up displaying.</p>\n<p>At this point you have everything you need for a fully functioning CRUD app, if you manually type all your actions through the console, and view the output in the console.</p>\n<h2 id=\"view\"><a href=\"#view\" aria-label=\"view permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>View</h2>\n<p>We're going to create the view by manipulating the <strong>DOM</strong> - the document object model. Since we're doing this in plain JavaScript without the aid of React's JSX or a templating language, it will be kind of verbose and ugly, but such is the nature of manipulating the DOM directly.</p>\n<p>Neither the controller nor the model should know anything about the DOM, HTML elements, CSS, or any of that. Anything relating to it should be in the view.</p>\n<blockquote>\n<p>If you're not familiar with the DOM or how the DOM is different to HTML source code, read <a href=\"/introduction-to-the-dom/\">Introduction to the DOM</a>.</p>\n</blockquote>\n<p>The first thing I'll do is just make helper methods to retrieve an element and create an element.</p>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Create an element with an optional CSS class</span>\n  <span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tag<span class=\"token punctuation\">,</span> className</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span> element<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> element\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Retrieve an element from the DOM</span>\n  <span class=\"token function\">getElement</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">selector</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> element\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>So far so good. Now in the constructor, I'm going to set up all the things I need for my view. That'll be:</p>\n<ul>\n<li>The root element of the app - <code class=\"language-text\">#root</code></li>\n<li>The title heading - <code class=\"language-text\">h1</code></li>\n<li>A form, input and submit button for adding a todo - <code class=\"language-text\">form</code>, <code class=\"language-text\">input</code>, <code class=\"language-text\">button</code></li>\n<li>The todo list - <code class=\"language-text\">ul</code></li>\n</ul>\n<p>I'll make them all variables in the constructor so we can easily refer to them.</p>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// The root element</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>app <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#root'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// The title of the app</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'h1'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Todos'</span>\n\n    <span class=\"token comment\">// The form, with a [type=\"text\"] input, and a submit button</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'text'</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>placeholder <span class=\"token operator\">=</span> <span class=\"token string\">'Add todo'</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'todo'</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>submitButton <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>submitButton<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Submit'</span>\n\n    <span class=\"token comment\">// The visual representation of the todo list</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'todo-list'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Append the input and submit button to the form</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>submitButton<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Append the title, form, and todo list to the app</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now the parts of the view that won't change are set up.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 850px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ba801652f6eb69882806f6a6f8ab9903/be72e/mvc2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.27453769559034%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACUElEQVQ4y6WTT08TQRTAFxWjMU6ltE3lT9NuoX8XaOkWEC8mJnoksX4FL/0EJl6FcDTxpF71SAyBtiwUEmtI8AuUNqHplFpSCahNTGh3Z/f5dkqrJhyqvuS3b+btvF9mdjOCgHHVf7tfEIbIoOAiN25eJ1gigwNWYr01QBw2O7FZB3FsJUNDw8TjEcnIiIv4/AESCIaIKIrEK3otbo94TehEyOV78nA+fByMB0qx+Hz53v0HNBKboRF5hk5Nx2lUnqVTUZn6/CEqen10bNxP3Z4xDs4PkFNRHH/ZFY6OepakCQl8kgRReQ4mp+MgRWUIR2IwPXMHYnN3eZ7A+XggDMMuEdfNgjw7D8GgBKHwJIy4vQqqLnPh0vLy4sbWNqynMupWdlvfRDLKpr66tq6vp9Jt0hk9ndng4/era/h+S1dwXSqdUT/kPsKr129SqOrnwk97e4vQDlY9PDT29/ehXq9Dj6GZj1rtcxpVV7gwm81yoaZprFarGcViESqVijkHVVV/QwOmqVBvaFD4wqDylUHLLGLk8/lfwp2dne4Om82m0Wg0ADMwxri0Q4v3tuCZokPoBcDCWwMaZzoXFgrFi4XYaJi7MQW6rv8BQwzk+IcBBycA1e+GWeNCPNXFQsTo7dO1lxnGxcLnZhF3oek9BDNhnczU9pELqa4wl8stw39GqVRSusKVlZWn1Wr1jFJ6in/3299QLpdPjo6O1N3d3XcdYZ/FYvE6nc4Fh8PxGEmc515I2O32BPY+stlsES5UFIVLkUvnV+dfMHv7ksmk8BNsspynPVs0YAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mvc2\"\n        title=\"mvc2\"\n        src=\"/static/ba801652f6eb69882806f6a6f8ab9903/4d3f1/mvc2.png\"\n        srcset=\"/static/ba801652f6eb69882806f6a6f8ab9903/0cb30/mvc2.png 213w,\n/static/ba801652f6eb69882806f6a6f8ab9903/a67b6/mvc2.png 425w,\n/static/ba801652f6eb69882806f6a6f8ab9903/4d3f1/mvc2.png 850w,\n/static/ba801652f6eb69882806f6a6f8ab9903/bfdc0/mvc2.png 1275w,\n/static/ba801652f6eb69882806f6a6f8ab9903/be72e/mvc2.png 1406w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n      />\n  </a>\n    </span></p>\n<p>Two more small things - a getter and resetter of the input (new todo) value.</p>\n<blockquote>\n<p>I'm using underscores in the method names to signify that they're private (local) methods that won't be used outside of the class.</p>\n</blockquote>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">get</span> <span class=\"token function\">_todoText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>value\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">_resetInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>All the setup's done now. The most complex part is displaying the todo list, which is the part that will change every time a change is made to the todos.</p>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">displayTodos</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">displayTodos</code> method will create the <code class=\"language-text\">ul</code> and <code class=\"language-text\">li</code>s that the todo list consists of, and display them. Every time a todo is changed, added, or removes, the <code class=\"language-text\">displayTodos</code> method will be called again with the <code class=\"language-text\">todos</code> from the model, resetting the list and redisplaying them. This will keep the view in sync with the model state.</p>\n<p>The first thing we'll do is remove all todo nodes every time it's called. Then, we'll check if any todos exist. If they don't, we'll display an empty list message.</p>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Delete all nodes</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Show default message</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p'</span><span class=\"token punctuation\">)</span>\n  p<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Nothing to do! Add a task?'</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now we'll just loop through the todos and display a checkbox, span, and delete button for every existing todo.</p>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Create todo item nodes for each todo in state</span>\n  todos<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> li <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n    li<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> todo<span class=\"token punctuation\">.</span>id\n\n    <span class=\"token comment\">// Each todo item will have a checkbox you can toggle</span>\n    <span class=\"token keyword\">const</span> checkbox <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n    checkbox<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'checkbox'</span>\n    checkbox<span class=\"token punctuation\">.</span>checked <span class=\"token operator\">=</span> todo<span class=\"token punctuation\">.</span>complete\n\n    <span class=\"token comment\">// The todo item text will be in a contenteditable span</span>\n    <span class=\"token keyword\">const</span> span <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span>\n    span<span class=\"token punctuation\">.</span>contentEditable <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    span<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'editable'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// If the todo is complete, it will have a strikethrough</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">.</span>complete<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> strike <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'s'</span><span class=\"token punctuation\">)</span>\n      strike<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> todo<span class=\"token punctuation\">.</span>text\n      span<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>strike<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Otherwise just display the text</span>\n      span<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> todo<span class=\"token punctuation\">.</span>text\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// The todos will also have a delete button</span>\n    <span class=\"token keyword\">const</span> deleteButton <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'delete'</span><span class=\"token punctuation\">)</span>\n    deleteButton<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Delete'</span>\n    li<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>checkbox<span class=\"token punctuation\">,</span> span<span class=\"token punctuation\">,</span> deleteButton<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Append nodes to the todo list</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now the view is set up and the model is set up. We just don't have a way to connect them - no events watching for a user to make input, and no handlers to handle the output of such an event.</p>\n<p>The console still exists as a temporary controller, and you can add and remove todos through it.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 850px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e9c1158a4bed736c056cd7d12750fe2d/bd1a4/mvc3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.22382671480145%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACpUlEQVQ4y6WSX2vTUBjGA4KXXhT7Z+nSNG3SNk2ypp2ttttaUCbCBK3erLYOdrvree9oncPB/CL7CoJXjsK6iHhhZWOoSK0K1nZlTZNzXs/JVtnG2IU+8Mt7SHif85z3hBGu+C+HA+yDoBh6pEwk56VYvBSOyKWQFC15fWzJ4xkrjY/zpQAvlDgu6FSeDzlrCv3m9bLzPp+/wvo5DyNc5QLTuYxZuH0LZu/chcLNWcgTaM1kZyCVyUFcTUAkpkAsrjlVOl5TFE2HG7kZyE7lIcCH7jHlx5XQm616t9Ew4EOzae/u7SGH3T309dMu6ne+o6crK0ibSKCp6TyKxmQUV1SUzU2hyWtplM3m0Ew+P8wXCqCqWpF5srwstNvt3v7+PiDbRgCAR2x9AWx0AL/c2MCKEsXXMzpOqDLW1TjWNQVrchTregKn02k7lUoBz/NFplKpCN1ut4cxBtu2sWVZYFk2ALJg8+0hbH4EeFarghiSQE9OghyRQJNEB5WQUBScTCZtTUuA1+stMouLi0Kn0+kRQavVwiQt/Gh/g9bPDqy9OoR6C+DFWg2CXAj0iRQ5lgoRSQJJFEdgURTtSCQCfr+/yCwsLAjUjSYcDAaYAKY5gENzCI3PJvwiYZ+vroLX54NoNAoSMSMGJ/lryLJskSmXy0K/3+/BkTCckuU8q9UauN1uoE3hcPgsmGDTjRxDOsORIT4SjDCHR4a1Wg08Ho+T8Ew6J+GFhqfyWf9gSI98cHDwmzYihOyTDIdDMkGwq9WqTY5M52TT5nMYHhvep5cSNk3Tggu0vr5OfwmQZdm5lPOg6YnhQ2Zubo6t1+uvG43Gu+3t7R2CMYK8N5rNprG0tGS4XC4jGAwaHMedZYfQCAQC78lYCgzRJYKLMEbw/QduwuU/6j04C7D1pUgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mvc3\"\n        title=\"mvc3\"\n        src=\"/static/e9c1158a4bed736c056cd7d12750fe2d/4d3f1/mvc3.png\"\n        srcset=\"/static/e9c1158a4bed736c056cd7d12750fe2d/0cb30/mvc3.png 213w,\n/static/e9c1158a4bed736c056cd7d12750fe2d/a67b6/mvc3.png 425w,\n/static/e9c1158a4bed736c056cd7d12750fe2d/4d3f1/mvc3.png 850w,\n/static/e9c1158a4bed736c056cd7d12750fe2d/bfdc0/mvc3.png 1275w,\n/static/e9c1158a4bed736c056cd7d12750fe2d/c9b65/mvc3.png 1700w,\n/static/e9c1158a4bed736c056cd7d12750fe2d/bd1a4/mvc3.png 2216w\"\n        sizes=\"(max-width: 850px) 100vw, 850px\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"controller\"><a href=\"#controller\" aria-label=\"controller permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Controller</h2>\n<p>Finally, the controller is the link between the model (the data ) and the view (what the user sees). Here's what we have so far in the controller.</p>\n<div class=\"filename\">Controller</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Controller</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">model<span class=\"token punctuation\">,</span> view</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model <span class=\"token operator\">=</span> model\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view <span class=\"token operator\">=</span> view\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Our first link between the view and model is to make a method that calls <code class=\"language-text\">displayTodos</code> every time a todo changes. We can also call it once in the <code class=\"language-text\">constructor</code> to display the initial todos if there are any.</p>\n<div class=\"filename\">Controller</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Controller</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">model<span class=\"token punctuation\">,</span> view</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model <span class=\"token operator\">=</span> model\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view <span class=\"token operator\">=</span> view\n\n    <span class=\"token comment\">// Display initial todos</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onTodoListChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">onTodoListChanged</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">todos</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span><span class=\"token function\">displayTodos</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The controller will handle events after they're fired. When you submit a new todo, or click the delete button, or click on the checkbox of a todo, an event will be fired. The view must listen for those events because they're user input of the view, but it will dispatch the responsibility of what will happen in response to the event to the controller.</p>\n<p>We'll create handlers for the events in the controller.</p>\n<div class=\"filename\">Controller</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function-variable function\">handleAddTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">todoText</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">addTodo</span><span class=\"token punctuation\">(</span>todoText<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function-variable function\">handleEditTodo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> todoText</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">editTodo</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> todoText<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function-variable function\">handleDeleteTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">deleteTodo</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function-variable function\">handleToggleTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">toggleTodo</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"setting-up-event-listeners\"><a href=\"#setting-up-event-listeners\" aria-label=\"setting up event listeners permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up event listeners</h3>\n<p>Now we have these handlers, but the controller still doesn't know when to call them. We have to put event listeners on the DOM elements in the view. We'll respond to the <code class=\"language-text\">submit</code> event on the form, and <code class=\"language-text\">click</code> and <code class=\"language-text\">change</code> events on the todo list. (I'm skipping \"Edit\" for now since it's slightly more complicated.)</p>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">bindAddTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">handler</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'submit'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_todoText<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_todoText<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_resetInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">bindDeleteTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">handler</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">===</span> <span class=\"token string\">'delete'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>parentElement<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n\n      <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">bindToggleTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">handler</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'checkbox'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>parentElement<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n\n      <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We need to call the handler from the view, so we're going to bind the methods that are listening for the events to the view.</p>\n<blockquote>\n<p>We used arrow functions on all the handle events. This allows us to call them from the view using the <code class=\"language-text\">this</code> context of the controller. If we did not use arrow functions, we would have to manually bind them, like <code class=\"language-text\">this.view.bindAddTodo(this.handleAddTodo.bind(this))</code>. Yikes.</p>\n</blockquote>\n<div class=\"filename\">Controller</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span><span class=\"token function\">bindAddTodo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleAddTodo<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span><span class=\"token function\">bindDeleteTodo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleDeleteTodo<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span><span class=\"token function\">bindToggleTodo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleToggleTodo<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// this.view.bindEditTodo(this.handleEditTodo) - We'll do this one last</span></code></pre></div>\n<p>Now when a <code class=\"language-text\">submit</code>, <code class=\"language-text\">click</code> or <code class=\"language-text\">change</code> event happens on the specified elements, the corresponding handlers will be invoked.</p>\n<h3 id=\"respond-to-callbacks-in-the-model\"><a href=\"#respond-to-callbacks-in-the-model\" aria-label=\"respond to callbacks in the model permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Respond to callbacks in the model</h3>\n<p>There's something we left out - the events are listening, the handlers are invoked, but nothing happens. This is because the model does not know that the view should update, and does not know what to do to make the view update. We have the <code class=\"language-text\">displayTodos</code> method on the view to solve this, but as mentioned earlier, the model and view should not know about each other.</p>\n<p>Just like with listening for events, the model should fire back to the controller to let it know that something happened.</p>\n<p>We already made the <code class=\"language-text\">onTodoListChanged</code> method on the controller to deal with this, we just have to make the model aware of it. We'll bind it to the model the same way we did with the handlers on the view.</p>\n<p>In the model, add <code class=\"language-text\">bindTodoListChanged</code> for <code class=\"language-text\">onTodoListChanged</code>.</p>\n<div class=\"filename\">Model</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">bindTodoListChanged</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onTodoListChanged <span class=\"token operator\">=</span> callback\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And you'll bind this in the controller, just like with the view.</p>\n<div class=\"filename\">Controller</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">bindTodoListChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onTodoListChanged<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now after every method in the model, you'll call the <code class=\"language-text\">onTodoListChanged</code> callback.</p>\n<div class=\"filename\">Model</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">deleteTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onTodoListChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"add-local-storage\"><a href=\"#add-local-storage\" aria-label=\"add local storage permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add local storage</h3>\n<p>At this point, the app is mostly complete and all the concepts have been demonstrated. We can make it a little bit more permanent by persisting the data in the local storage of the browser, so it will persist locally after refresh.</p>\n<blockquote>\n<p>If you aren't aware of how local storage works, read <a href=\"/how-to-use-local-storage-with-javascript/\">How to Use Local Storage with JavaScript</a>.</p>\n</blockquote>\n<p>Now we can set the initial todo value to what's in local storage or an empty array.</p>\n<div class=\"filename\">Model</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We'll make a <code class=\"language-text\">commit</code> private method to update the value of <code class=\"language-text\">localStorage</code> as well as the model state.</p>\n<div class=\"filename\">Model</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">_commit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onTodoListChanged</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">)</span>\n  localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todos'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>After every change to <code class=\"language-text\">this.todos</code>, we can call it.</p>\n<div class=\"filename\">Model</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">deleteTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_commit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"add-live-editing-functionality\"><a href=\"#add-live-editing-functionality\" aria-label=\"add live editing functionality permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add live editing functionality</h3>\n<p>The last piece in this puzzle is the ability to edit an existing todo. Editing is always a little trickier than adding or deleting. I wanted to make it simple, and not require an edit button or replacing the <code class=\"language-text\">span</code> with an <code class=\"language-text\">input</code> or anything. We also don't want to call the <code class=\"language-text\">editTodo</code> every single time a letter is typed, because it will re-render the whole todo list UI.</p>\n<p>I decided to make a method on the view that updates a temporary state variable with the new editing value, and another that calls the <code class=\"language-text\">handleEditTodo</code> method in the controller which updates the model. An <code class=\"language-text\">input</code> event is what gets fired when you type in a <code class=\"language-text\">contenteditable</code> element, and <code class=\"language-text\">focusout</code> fires when you leave a <code class=\"language-text\">contenteditable</code> element.</p>\n<div class=\"filename\">View</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_temporaryTodoText\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_initLocalListeners</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Update temporary state</span>\n<span class=\"token function\">_initLocalListeners</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">===</span> <span class=\"token string\">'editable'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_temporaryTodoText <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>innerText\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Send the completed value to the model</span>\n<span class=\"token function\">bindEditTodo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">handler</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>todoList<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'focusout'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_temporaryTodoText<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>parentElement<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n\n      <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_temporaryTodoText<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_temporaryTodoText <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now when you click on any todo item, you'll enter into \"editing\" mode, which will update the temporary state variable, and when you tab or click away from the todo, it will save in the model and reset the temporary state.</p>\n<p>Just make sure to bind the <code class=\"language-text\">editTodo</code> handler.</p>\n<div class=\"filename\">Controller</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span><span class=\"token function\">bindEditTodo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleEditTodo<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>The <code class=\"language-text\">contenteditable</code> solution was quickly implemented. There are all sorts of issues you need to consider when using <code class=\"language-text\">contenteditable</code> in a production app, <a href=\"/content-editable-elements-in-javascript-react/\">many of which I've written about here</a>.</p>\n</blockquote>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>There you have it. A dependency-free todo app in plain JavaScript that demonstrates the concepts of model-view-controller architecture. Here is a link to the completed demo and source once again.</p>\n<ul>\n<li><a href=\"https://taniarascia.github.io/mvc\">View demo</a></li>\n<li><a href=\"https://github.com/taniarascia/mvc\">View source</a></li>\n</ul>\n<p>I hope this tutorial helped you understand MVC. Using this loosely-coupled pattern can add a lot of boilerplate and abstraction to an application, but it's also a predictable, familiar pattern that is commonly used across many frameworks, and an important concept to know as a developer.</p>","timeToRead":15,"excerpt":"I wanted to write a simple application in plain JavaScript using the model-view-controller architectural pattern. So I did, and here it is","frontmatter":{"title":"Writing a Simple MVC App in Plain JavaScript","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEJ0lEQVQ4y61TfUxTVxR/hWWLbn8Igy2NgYGLcc45FdDM6fCLGZGVocAEikg3ihBAKUMsONYJLS3y0RZaKLaFtiFDwUqEYgW6TQqGEZEavjaEOWSKwUrGNoSx93H23sOKMmdcspuc/HLv+Z3fPeeecxHkKatUJqQRABiLfQD2eZw0IM+1vL09aRTlZjhTGBGx75OjCUGXsnisi5GhmxOps/IijhOFm3zefLaYq6sLlRWydcsmR2Yu17stE62NpXBGHQ/FQjbu5eG2inLs8l9Diy5nuvy74Ea/9Q/LmqSz01fKigF+hV9uXp2V5cXOGnXJkJ6010hz0DpacPuW1U8Xc3KaTyr1CJcm7ti+de1PQ1dQwG8DEHcJ0/kyQlUYjWvkcbBn57uBFCc28gP64o0bVvxTsCA/+4lGNDUYGqjspuyD6Nz0TZi6/wMoChKxOm0iCDL22UgKzWMwGEh2+seI67KXF8RWPGyE9nQRfWN6WgJryj5AatuxhnMKsJj1OMDvuPWbGiiVsNEz6iRgh72fQnG/PBZCxzBfX/b4KADi7u7m2Dp3XK7vJQVgqP8yZrkgwhtrRWAfJ4/+uoOrFRl4dXkc5Asi7pHc16iAde94LowX2VEaO9sbXqBQLs3hAX4H5h6MoiajFB/t04Cy8HCPpqKoFeAB9NlaMFleNGrUpUDSZwEKKsb0dRqdpe8673nR8FCW4wZmn611EmAKujqMeEdzPtbdJof9rPcCXlr6qtdg77dkMZNQo8vDtbJDUCKJAd/1Xn5UYHCgj9NjJRP0DTXVShXVCPvdPtRUJ0Zv9VeCVBzf5OCVSHOllOD4rWuoTMxBqTHiH2W1PPGrsk+k0sohwYG+oyOd5Pk9sFzU4LZ2GZiNObDmLQ8fxzuTy/1KW/0EwDQ0GpV42akoTK88DCF7fQ9QzhTuh86PlC81VTcD/AHDg1a0uV6E/dyrBQGfLVw8XvzjqZHozCjgf97GTpfwsLOaBMjNDB0mXUsekbL4R8JnfrsB2OwYZjIWE0Pd5WCo+Hxm9UpmzEe7N+wkv1ngLv+39wQH+u32YC4NUsoFY/22FqhQCPAScRR6VpsMnCj/bIfei53tF4ao7Lo6zmNWs4TosZaQYxGFV5XGgU7BharSBaP2qsIYstxoUEs5hKEsHq+tTAapiD3t5en2BqIqk+QATMDkxADaWJtH3LhWQcglXEKYtR+Up2IIeV40mcUikxwkO3yQ8hEyERukwihUVRQLn7K31SKy4pO5APfBatHPfW8pwAa6VFhLfS5mPvfVf7G5dnM+ZKaFtVIlv2Koko1fbVPAj90qGOgqhxGbBkauaxbwGTbco4axAR18ZxJDwA4fX/oRV61cvvlE+oGEL45FHCKRk5kWzuHzns+O88JiyThuZNi2IFpMrz7JQP6nRf5/5G+j25uYV1PC5QAAAABJRU5ErkJggg==","width":150,"height":150,"src":"/static/3401eff3a3fea437e1f6293b88462e7a/4148e/triangle.png","srcSet":"/static/3401eff3a3fea437e1f6293b88462e7a/4148e/triangle.png 1x,\n/static/3401eff3a3fea437e1f6293b88462e7a/de03e/triangle.png 1.5x,\n/static/3401eff3a3fea437e1f6293b88462e7a/1e9e2/triangle.png 2x"}}},"slug":"javascript-mvc-todo-app","date":"2019-07-30T00:00:00.000Z","categories":["Popular","Code"],"tags":["javascript","mvc","architecture"],"template":"post"},"fields":{"slug":"/javascript-mvc-todo-app/","date":"2019-07-30T00:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/javascript-mvc-todo-app/"}}}