{"componentChunkName":"component---src-templates-post-js","path":"/basic-authentication-for-an-express-node-app-htpasswd/","webpackCompilationHash":"","result":{"data":{"markdownRemark":{"html":"<p>I was struggling to find a simple way to add username and password authentication to a Node.js app running on an Express server, like <strong>.htpasswd</strong> for Apache. Finally, a <a href=\"https://stackoverflow.com/questions/23616371/basic-http-authentication-with-node-and-express-4\">StackOverflow</a> answer helped me out.</p>\n<p>To start, install the <a href=\"https://www.npmjs.com/package/basic-auth\">basic-auth</a> package:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> basic-auth</code></pre></div>\n<p>Create an <strong>auth.js</strong> with the following code, changing <code class=\"language-text\">username</code> and <code class=\"language-text\">password</code> to whatever you want.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> auth <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'basic-auth'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> admins <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> username<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> password<span class=\"token punctuation\">:</span> <span class=\"token string\">'password'</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> <span class=\"token function\">auth</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>admins<span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> admins<span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>password <span class=\"token operator\">!==</span> user<span class=\"token punctuation\">.</span>pass<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    response<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WWW-Authenticate'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Basic realm=\"example\"'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">401</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And in <strong>server.js</strong>, include this at the top of your file.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> auth <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./auth'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>auth<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Make sure to hide <strong>auth.js</strong> with a <strong>.gitignore</strong> file, and you're all set!</p>","timeToRead":1,"excerpt":"I was struggling to find a simple way to add username and password authentication to a Node.js app running on an Express server, likeâ€¦","frontmatter":{"title":"Basic Authentication for an Express Node App (htpasswd)","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD7klEQVQ4y3VUXUwUVxQeFiM8+eZTH+pL35rGaLWV7Nw7syw1Wgz+pBRrTa1rrD6oEKWttZUHaURgl/11AYmlP1Y2kjQiMSYSk92ZXXaxrGAMtKGJXaK2aVI1WiOyzh7PuTMDo0knOcm9d875zs93zpEk/M6kt0tBTaWjFNVqpS6dl0vWF9ZqXgvqynBQ578HdY/bfg/obElIrxFnv+aW+kZ3SN9n9ktSSK+2dSQ0dHVkVpXROZKqq8D71wj+X2xchUhOEYJvP4R07+u2DTmP6rXW2QyKQMsCurt8EVitR8WZnpseCI1y6NLZcxSDpHvSA+SkC53FtM2VpN+eXlmGNi7buMwB9DamNhLPeyB6XSGgeQsILCmhFEMZDj0m8Aw5X7BPKyZWSPMux1TiQVSM3/DYET13gDgFLCfz0TEFTudVAh7B+q501E7t7595zwYqOgydIEKC6ZfeSH/+zK1qAr2dnR6001YumJ5Eig4gjiRwcAL6kwLUBhbRUp1RbzYxfqDSIkUZoFRRyYxOIwPFEZUCgRSDyBiDo/0MfEdlCGUZvZXQxghnSZcXBm80LTUj1JRE3xTWTmPFYAYNcxw6ku9AQHMLwPbkWiAi4pMMmrsZbPlYhnCOCcGIje6b1E68MDDWVCEAsb8SJy95oK5BLm7fx6B1uAq+yzfA7P08/P3oNzg34YO2q+tg95cMata7oWGfLBztbZGhdpvbOBzBlNO8cH7UAoxPqIlPGlX49HO5+KFPgZ3H3oTph0Pwxz8ZmPrrKtybuw5729+CLR9x2N8qwwc+GY4PMFi/UYZdR7ix5yssjcYLF6cOmYCxX5XEZ8dVaEmwYmNQgT0nVsG12TZ4/PQ+PJl7ALl7fXDk7Gqoq+eUBexqlqHtCoP3t8qw86BZQySm0DvUWGGznIjmsIZISgAJ6bzGoVN7F3651QzD0y3QmVon6vXNzwwOdsqCILq3DuHdLxtdGtYwwws/JpsWAM93T4iGFiwjMSVql/bkGjiVXE31ETULI8uxcbNtkMASMl2K5bkRGRMs3x6cWIzwYt+Ul4yeOkYNW0IphdLqYh9qZqssNDaC4v0ZLQ8M4N8L44eX2pPiQQ9/0nxSe/zPtLw6NWJhmJnxOQyqyVo5TAx0TKurxMcW/PnESt9wzDO8MsfF09ZKQ5tzuM5WEMa3qTfsnaa4FuZa865ApZ9ImYysaA0LcJ7eraiyuBD44l6UzfWHrFrj58WdKC9xLAyORqNkHKZIkIieSbEE7uI/n63nT1eVI7DL2ouS1Juqx/VVLXWk11pAHpdfr3Iu290Icgeje4aRn4roG5bR+xdZQWb55ZFee0lj2TZJLwB1bCjmez/prQAAAABJRU5ErkJggg==","width":150,"height":150,"src":"/static/517c02bd875932e2a959488763695b28/4148e/node.png","srcSet":"/static/517c02bd875932e2a959488763695b28/4148e/node.png 1x"}}},"slug":"basic-authentication-for-an-express-node-app-htpasswd","date":"2017-11-13T00:00:00.000Z","categories":["Code"],"tags":["authentication","express","node"],"template":"post"},"fields":{"slug":"/basic-authentication-for-an-express-node-app-htpasswd/","date":"2017-11-13T00:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/basic-authentication-for-an-express-node-app-htpasswd/"}}}